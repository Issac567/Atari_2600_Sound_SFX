<!DOCTYPE html>
<html lang="en">
    <head>
        <link rel="icon" href="data:,">             <!-- Remove annoying no fav icon -->
        <link rel="stylesheet" href="styles.css">   <!-- Seperate CSS in another file -->
        <meta charset="UTF-8">
        <title>Atari 2600 SFX Editor</title>                  
    </head>
    <body>
        <!-- This is a header -->
        <h1>Atari 2600 SFX Editor with TIA Sound Generator</h1>

        <!-- ======================================= -->
        <!-- This is a Step Parameters Panel -->
        <!-- ======================================= -->
        <div class="cls_panelContainer">
            <div class="cls_panel" id="id_stepPanel">
                <!-- This is a header -->
                <h3>Step Parameters</h3>
        
                <!-- This is a Control Dropbox -->
                <div class="cls_inputRow">
                    <label for="id_ctl">Control:</label>
                    <select id="id_ctl">
                        <option value="1">1 = Buzzy</option><option value="2">2 = Distortion</option>
                        <option value="3">3 = Flangy</option><option value="4">4 = Pure</option>
                        <option value="5">5 = Pure</option><option value="6" selected>6 = Between Pure/Buzzy</option>
                        <option value="7">7 = Reedy</option><option value="8">8 = White Noise</option>
                        <option value="9">9 = Reedy</option><option value="10">10 = Between Pure/Buzzy</option>
                        <option value="11">11 = Silent-ish</option><option value="12">12 = Low Pure</option>
                        <option value="13">13 = Low Pure</option><option value="14">14 = Electronic Low</option>
                        <option value="15">15 = Electronic Low</option>
                    </select>
                </div>

                <!-- This is a Frequency Textbox -->
                <div class="cls_inputRow">
                    <label for="id_freq">Frequency (0=high, 31=low):</label>
                    <input id="id_freq" type="number" min="0" max="31" value="4">
                </div>

                <!-- This is a Volume Textbox -->
                <div class="cls_inputRow">
                    <label for="id_vol">Volume (0=off, 15=high):</label>
                    <input id="id_vol" type="number" min="0" max="15" value="10">
                </div>

                <!-- This is a Repeat Textbox -->
                <div class="cls_inputRow">
                    <label for="id_repeat">Repeat (1-100):</label>
                    <input id="id_repeat" type="number" min="1" max="100" value="1">
                </div>

                <!-- This is a Add Step at end Button -->
                <div class="cls_inputRow">
                    <label></label>
                    <button id="id_AddStepsEnd"
                            class="cls_AddStepsEnd"
                            onclick="btnAddStepEnd()">
                        Add Steps at End
                    </button>
                </div>
            </div>

            <!-- ======================================= -->
            <!-- This is a Playback Panel -->
            <!-- ======================================= -->
            <div class="cls_panel" id="id_playbackPanel">
                <!-- This is a header -->
                <h3>Playback</h3>
            
                <!-- This is a Play All Button -->
                <button id="id_playAllSequence" class="cls_playAllSequence" onclick="btnplayAllSequence()">Play All</button>

                <!-- This is a Stop Button -->
                <button id="id_StopAudio" class="cls_StopAudio" onclick="btnStopAudio()">Stop</button>

                <!-- This is a Loop Playback Checkbox  -->
                <div class="cls_PlaybackCheckbox">
                    <label class="cls_customCheckbox">
                    <input type="checkbox" id="id_LoopPlayback" onclick="chkLoopPlayback(this.checked)">
                    <span class="cls_checkmark"></span>
                    Loop Playback
                    </label>
                </div>

                <!-- This is a Play on change Checkbox  -->
                <div class="cls_PlaybackCheckbox">
                    <label class="cls_customCheckbox">
                    <input type="checkbox" id="id_PlayOnChange" checked>
                    <span class="cls_checkmark"></span>
                    Play on Change
                    </label>
                </div>         
            </div>

            <!-- ======================================= -->
            <!-- This is a Table Management Panel -->
            <!-- ======================================= -->
            <div class="cls_panel" id="id_tableManagementPanel">
                <!-- This is a header -->
                <h3>Table Management</h3>

                <!-- This is a New Table Button -->
                <button id="id_NewTable" class="cls_ManagementBtn" onclick="btnNewTable()">New Table</button>

                <!-- This is a New Save Button -->
                <button id="id_SaveTable" class="cls_ManagementBtn" onclick="btnSaveTable()">Save Table</button>

                <!-- This is a Load Table Button Triggers the triggerLoadTable -->
                <button id="id_LoadTable" class="cls_ManagementBtn" onclick="btnLoadTable()">Load Table</button>

                <!-- File input for loading table layout (JSON format) -->
                <input type="file" id="id_loadTableFileInput" accept=".json" hidden onchange="triggerLoadTable(event)">
            </div>

            <!-- ======================================= -->
            <!-- This is a Undo/Redo Panel -->
            <!-- ======================================= -->
            <div class="cls_panel" id="id_undoRedoPanel">
                <!-- This is a header -->
                <h3>Undo/Redo</h3>

                <!-- This is a New Table Button -->
                <button id="id_Undo" class="cls_UndoRedoBtn" onclick="btnUndo()">Undo</button>

                <!-- This is a New Save Button -->
                <button id="id_SaveTable" class="cls_UndoRedoBtn" onclick="btnRedo()">Redo</button>
            </div>
        </div>

        <!-- ======================================= -->
        <!-- This is a Keyboard -->
        <!-- ======================================= -->
        <div class="cls_panel" id="id_keyboardPanel">
            <!-- This is a header -->
            <h3>Keyboard (Hold Down Play + Draggable)</h3>

            <div id="id_keyboardKeys"></div>

            <!-- Save / Load buttons INSIDE keyboard panel -->
            <div id="id_keyboardFileButtons">
                <!-- This is a Save layout button -->
                <button id="id_SaveKeyboardLayout" class="cls_KeyboardSaveLoadBtn" onclick="btnSaveKeyboardLayout()">Save Layout</button>
            
                <!-- This is a Load layout button triggers triggerLoadKeyboardLayout -->
                <button id="id_LoadKeyboardLayout" class="cls_KeyboardSaveLoadBtn" onclick="btnLoadKeyboardLayout()">Load Layout</button>
            
                <!-- File input for loading keyboard layout (JSON format) -->
                <input type="file" id="id_loadKeyboardLayoutFileInput" accept=".json" hidden onchange="triggerLoadKeyboardLayout(event)">

                <!-- This is a Add Played Tone Checkbox   -->
                <div class="cls_KeyboardCheckbox">
                    <label class="cls_customCheckbox">
                        <input type="checkbox" id="id_KeyboardAddPlayedTone" onclick="chkKeyboardAddPlayedTone(this.checked)">
                        <span class="cls_checkmark"></span>
                        Add Played Tone
                    </label>
                </div>

                <!-- This is a Silence Gap Checkbox   -->
                <div class="cls_KeyboardCheckbox">
                    <label class="cls_customCheckbox">
                        <input type="checkbox" id="id_KeyboardSilenceTone" onclick="chkKeyboardSilenceTone(this.checked)" disabled>
                        <span class="cls_checkmark"></span>
                        Add Silence Gap
                    </label>
                </div>
            </div>
        </div>

        <!-- ======================================= -->
        <!-- This is a Table and Header -->
        <!-- ======================================= -->
        <h3 id="id_tonesTableTitle">Table Name</h3>
        <table id="id_tonesTable">
            <thead>
                <tr>
                    <th>#</th><th>Control</th><th>Frequency</th><th>Volume</th>
                    <th>Repeat</th><th>Play</th><th>Delete</th><th>Duplicate</th>
                </tr>
            </thead>
            <tbody></tbody>
        </table>
        
        <!-- ======================================= -->
        <!-- This is a Byte Tables Panel -->
        <!-- ======================================= -->
        <div class="cls_panelContainer2">
            <div class="cls_panel" id="id_byteTablePanel">
                <!-- This is a header -->
                <h3>Table Bytes</h3>

                <div class="cls_panel2" id="id_copyButtonsPanel">
                    <!-- This is a Copy Freq Button -->
                    <button id="id_CopyFrequency" class="cls_CopyMangBnt" onclick="btnCopyFrequency()">Copy Frequency Table</button>

                    <!-- This is a Control/Vol Button -->
                    <button id="id_CopyControlVolume" class="cls_CopyMangBnt" onclick="btnCopyControlVolume()">Copy Control/Volume Table</button>
                </div>

                <!-- This is a Freq Label -->
                <div id="id_frequencyTableLabel" class="cls_byteTableLabel">Frequency Table:</div>

                <!-- This is a Control/Vol Label -->
                <div id="id_controlVolumeTableLabel" class="cls_byteTableLabel">Control/Volume Table:</div>
            </div>
        </div>

        <!-- ======================================= -->
        <!-- This is a Paypal Donation  -->
        <!-- ======================================= -->
        <div class="cls_panelContainer2">
            <!-- PayPal Donate Panel -->
            <div class="cls_panel" id="id_paypalDonatePanel">
                <h3>Support Atari 2600 SFX Editor</h3>
                <p>Every little bit helps keep this project alive!</p>
                <a href="https://www.paypal.com/donate/?business=TXDQNPWL3YQPE&no_recurring=1&item_name=Support+my+work+%E2%80%94+every+little+bit+helps&currency_code=USD" target="_blank" class="cls_paypalButton">
                    Donate with PayPal
                </a>
            </div>
        </div>

        <!-- ======================================= -->
        <!-- This is a Version label -->
        <!-- ======================================= -->
        <div id="id_versionLabel">Version 3.10</div>

        <!-- ======================================= -->
        <!-- This is a toast -->
        <!-- ======================================= -->
        <div id="id_toast"></div>

        <!-- ======================================= -->
        <!-- Java Script files-->
        <!-- ======================================= -->
        <script src="JavaScript/wasm_exec.js"></script>

        <script src="JavaScript/public.js"></script>
        <script src="JavaScript/keyboard.js"></script>
        <script src="JavaScript/stepPanel.js"></script>
        <script src="JavaScript/playback.js"></script>
        <script src="JavaScript/undoRedo.js"></script>
        <script src="JavaScript/tableManagement.js"></script>
        <script src="JavaScript/table.js"></script>
        <script src="JavaScript/copyTables.js"></script>
        <script src="JavaScript/init.js"></script> 

        <script> 
            const go=new Go();
            WebAssembly.instantiateStreaming(fetch("main.wasm"), go.importObject).then(result => { go.run(result.instance); });
        </script>

    </body>
</html>


